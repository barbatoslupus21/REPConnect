<form class="evaluation-form" method="post">
    {% csrf_token %}
    
    <!-- Performance Evaluation Section -->
    <div class="evaluation-section">
        <h4 class="evaluation-section-title">Performance Evaluation</h4>
        <p class="evaluation-instruction">
            Rate your performance on each task on a scale of 1 (Poor) to 5 (Excellent).
            <br>
            <div class="rating-legend">
                <div class="rating-legend-item">
                    <i class="fas fa-star rating-legend-star"></i>
                    <span>1 - Poor</span>
                </div>
                <div class="rating-legend-item">
                    <i class="fas fa-star rating-legend-star"></i>
                    <span>2 - Fair</span>
                </div>
                <div class="rating-legend-item">
                    <i class="fas fa-star rating-legend-star"></i>
                    <span>3 - Good</span>
                </div>
                <div class="rating-legend-item">
                    <i class="fas fa-star rating-legend-star"></i>
                    <span>4 - Very Good</span>
                </div>
                <div class="rating-legend-item">
                    <i class="fas fa-star rating-legend-star"></i>
                    <span>5 - Excellent</span>
                </div>
            </div>
        </p>
        
        <!-- Rating Table -->
        <div class="rating-table">
            <!-- Header Row with Numbers -->
            <div class="rating-header">
                <div class="rating-question-header">TaskList</div>
                <div class="rating-scale-header">
                    <div class="rating-number-header">1</div>
                    <div class="rating-number-header">2</div>
                    <div class="rating-number-header">3</div>
                    <div class="rating-number-header">4</div>
                    <div class="rating-number-header">5</div>
                </div>
            </div>
            
            <!-- Rating Rows for each task -->
            {% for task_rating in task_ratings %}
            <div class="rating-row">
                <div class="rating-question">{{ task_rating.task_name }}</div>
                <div class="rating-stars-row" data-question-name="task_rating_{{ task_rating.task_id }}">
                    {% for value in "12345" %}
                    <div class="rating-star-cell">
                        <i class="fas fa-star rating-star {% if task_rating.rating and value|add:0 <= task_rating.rating %}filled{% else %}empty{% endif %}" 
                           data-value="{{ value }}" data-question="task_rating_{{ task_rating.task_id }}"></i>
                    </div>
                    {% endfor %}
                </div>
                <input type="hidden" name="task_rating_{{ task_rating.task_id }}" value="{{ task_rating.rating|default:'' }}">
            </div>
            {% empty %}
            <div class="rating-row">
                <div class="rating-question">No tasks assigned</div>
                <div class="rating-stars-row">
                    <p class="text-muted">Please contact your supervisor to assign tasks for evaluation.</p>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</form>
